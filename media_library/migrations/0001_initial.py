# Generated by Django 4.2.23 on 2025-11-06 18:36

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import storage_manager.fields
import storage_manager.storage_backends.local


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='MediaCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', max_length=50, unique=True, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ')),
                ('code', models.CharField(help_text='–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∑–∞–≥–ª–∞–≤–Ω—ã–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è)', max_length=20, unique=True, verbose_name='–ö–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏')),
                ('description', models.TextField(blank=True, help_text='–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ')),
                ('icon', models.CharField(blank=True, default='üìÅ', help_text='Emoji –∏–ª–∏ –∫–æ–¥ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è', max_length=50, verbose_name='–ò–∫–æ–Ω–∫–∞')),
                ('is_predefined', models.BooleanField(default=False, editable=False, verbose_name='–ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è')),
                ('is_active', models.BooleanField(default=True, verbose_name='–ê–∫—Ç–∏–≤–Ω–∞')),
                ('sorting_order', models.IntegerField(default=0, verbose_name='–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–µ–¥–∏–∞',
                'verbose_name_plural': '–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ–¥–∏–∞',
                'ordering': ['sorting_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='MediaTag',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞', max_length=50, unique=True, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞')),
                ('is_active', models.BooleanField(default=True, verbose_name='–ê–∫—Ç–∏–≤–µ–Ω')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': '–¢–µ–≥ –º–µ–¥–∏–∞',
                'verbose_name_plural': '–¢–µ–≥–∏ –º–µ–¥–∏–∞',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='MediaLibraryItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(help_text='–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞ —ç–ª–µ–º–µ–Ω—Ç–∞', max_length=200, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ')),
                ('description', models.TextField(blank=True, help_text='–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ', verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ')),
                ('media_file', storage_manager.fields.ManagedFileField(blank=True, help_text='–ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª', null=True, storage=storage_manager.storage_backends.local.LocalStorage(), upload_to='media_library/', verbose_name='–ú–µ–¥–∏–∞—Ñ–∞–π–ª')),
                ('preview_file', storage_manager.fields.ManagedFileField(blank=True, editable=False, help_text='–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–µ –ø—Ä–µ–≤—å—é –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π', null=True, storage=storage_manager.storage_backends.local.LocalStorage(), upload_to='media_library/previews/', verbose_name='–ü—Ä–µ–≤—å—é')),
                ('mime_type', models.CharField(blank=True, help_text='–¢–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)', max_length=100, verbose_name='MIME-—Ç–∏–ø')),
                ('is_active', models.BooleanField(default=True, verbose_name='–ê–∫—Ç–∏–≤–µ–Ω')),
                ('is_public', models.BooleanField(default=True, help_text='–î–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π', verbose_name='–ü—É–±–ª–∏—á–Ω—ã–π')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='media_items', to='media_library.mediacategory', verbose_name='–ö–∞—Ç–µ–≥–æ—Ä–∏—è')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_media_items', to=settings.AUTH_USER_MODEL, verbose_name='–ö—Ç–æ —Å–æ–∑–¥–∞–ª')),
                ('tags', models.ManyToManyField(blank=True, related_name='media_items', to='media_library.mediatag', verbose_name='–¢–µ–≥–∏')),
            ],
            options={
                'verbose_name': '–≠–ª–µ–º–µ–Ω—Ç –º–µ–¥–∏–∞–±–∏–±–ª–∏–æ—Ç–µ–∫–∏',
                'verbose_name_plural': '–≠–ª–µ–º–µ–Ω—Ç—ã –º–µ–¥–∏–∞–±–∏–±–ª–∏–æ—Ç–µ–∫–∏',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='mediacategory',
            index=models.Index(fields=['code', 'is_active'], name='media_libra_code_6fdcfe_idx'),
        ),
        migrations.AddIndex(
            model_name='medialibraryitem',
            index=models.Index(fields=['category', 'is_active'], name='media_libra_categor_d2290a_idx'),
        ),
        migrations.AddIndex(
            model_name='medialibraryitem',
            index=models.Index(fields=['created_at'], name='media_libra_created_2a2e36_idx'),
        ),
        migrations.AddIndex(
            model_name='medialibraryitem',
            index=models.Index(fields=['is_public', 'is_active'], name='media_libra_is_publ_fcdeda_idx'),
        ),
    ]
